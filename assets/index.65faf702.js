var k=Object.defineProperty,B=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var M=(t,a,e)=>a in t?k(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,y=(t,a)=>{for(var e in a||(a={}))I.call(a,e)&&M(t,e,a[e]);if(b)for(var e of b(a))S.call(a,e)&&M(t,e,a[e]);return t},T=(t,a)=>B(t,U(a));var w=(t,a)=>{var e={};for(var r in t)I.call(t,r)&&a.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&b)for(var r of b(t))a.indexOf(r)<0&&S.call(t,r)&&(e[r]=t[r]);return e};import{g as s,v as $,b as n,R as D,j as x,q as F,u as j,F as q}from"./vendor.f11f8cfa.js";import{d as H,e as z,M as R,F as C,I as E,B as L,s as v,g as V}from"./index.996a23e1.js";import{A as N}from"./index.c1e366ca.js";const O=t=>{const m=t,{label:a="",rows:e=4,marginBottom:r,focused:f=!1,autoResizeY:c=!1}=m,g=w(m,["label","rows","marginBottom","focused","autoResizeY"]),i=s.exports.useRef(null),o=s.exports.useMemo(()=>$(),[]);return s.exports.useEffect(()=>{var d;f&&((d=i.current)==null||d.focus())},[]),n(H,{htmlFor:o,label:a,style:{marginBottom:r===void 0?"":`${r}rem`},children:n(z,T(y({id:o,autoResizeY:c},g),{rows:e}))})},P=(t,a)=>{const{template:e,setTemplate:r}=t;if(!e)return null;const[f,c]=s.exports.useState(e),[g,i]=s.exports.useState(!1),o=s.exports.useRef(null);function m(p){const{value:u,name:l}=p.target;c(h=>T(y({},h),{[l]:u}))}async function d(){var p;try{if(!e)throw new Error("Invalid current templated");i(!0),await v.templateStore.updateTemplate(f),i(!1),(p=o.current)==null||p.setVisibility(!1),c(e)}catch(u){const l=V(u);F.error(l),i(!1)}}return s.exports.useEffect(()=>{e&&c(e)},[e]),s.exports.useImperativeHandle(a,()=>({setVisibility:p=>{var u;e&&c(e),(u=o.current)==null||u.setVisibility(p)}})),n(R,{ref:o,title:"Edit Template",onClose:()=>r(null),children:x(C,{onSubmit:d,children:[n(E,{autoComplete:"off",label:"Name",name:"name",placeholder:"Ex: Daily",value:f.name,onChange:m}),n(O,{label:"Description",name:"description",placeholder:"Ex: Tasks to do every day",value:f.description,onChange:m}),n(L,{type:"submit",variant:"green",paddingLg:!0,isLoading:g,children:"Update"})]})})};var Q=D.forwardRef(P);const Y=(t,a)=>{const{template:e,setTemplate:r,redirectOnDelete:f=!1}=t;if(!e)return null;const[,c]=j(),[g,i]=s.exports.useState(!1),[o,m]=s.exports.useState(""),d=s.exports.useRef(null);async function p(){var l;try{if(!e)throw new Error("Invalid current templated");i(!0),await v.templateStore.deleteTemplate({templateId:e._id}),i(!1),f?c("/home",{replace:!0}):(l=d.current)==null||l.setVisibility(!1)}catch(h){const A=V(h);F.error(A),i(!1)}}const u=s.exports.useMemo(()=>o===(e==null?void 0:e.name),[o,v.templateStore.createTemplate]);return s.exports.useImperativeHandle(a,()=>({setVisibility:l=>{var h;m(""),(h=d.current)==null||h.setVisibility(l)}})),n(R,{ref:d,title:"Confirm deletion",onClose:()=>r(null),children:x(C,{onSubmit:p,buttonIsDisable:!u,children:[x(N,{children:["This action ",n("b",{children:"cannot be undone"}),".This will permanently delete the current template",e.tasks.length?` and its existence ${e.tasks.length} tasks`:"","."]}),n(E,{autoComplete:"off",label:x(q,{children:["Please type ",n("b",{children:e.name})," to confirm:"]}),name:"name",value:o,onChange:l=>m(l.target.value)}),n(L,{type:"submit",variant:"red",paddingLg:!0,disabled:!u,isLoading:g,children:"Delete"})]})})};var W=D.forwardRef(Y);export{Q as M,O as T,W as a};
